<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
	<title>登录</title>
	<!-- Meta tag Keywords -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords"
		content="Simple Signin Form Responsive Widget,Login form widgets, Sign up Web forms , Login signup Responsive web form,Flat Pricing table,Flat Drop downs,Registration Forms,News letter Forms,Elements" />
	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- Meta tag Keywords -->
	<!-- css files -->
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
	<!-- Style-CSS -->
	<link rel="stylesheet" href="css/font-awesome.css">
	<!-- Font-Awesome-Icons-CSS -->
	<!-- //css files -->
	<!-- web-fonts -->
	<link href="https://fonts.googleapis.com/css?family=Play:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i"
		rel="stylesheet">
	<!-- //web-fonts -->
	<link rel="icon" href="./images/favicon.jpg" type="image/x-icon">
	
</head>

<body>
    <div class="video-background">
        <video id="bgVideo1" autoplay muted loop playsinline>
            <source src="audio/login1.mp4" type="video/mp4">
        </video>
        <video id="bgVideo2" autoplay muted loop playsinline style="display:none;">
            <source src="audio/login2.mp4" type="video/mp4">
        </video>
    </div>
    <audio id="bgMusic" loop autoplay>
        <source src="audio/login.mp3" type="audio/mp3">
    </audio>
    <script>
        // 极简版媒体初始化 - 针对微信和移动端深度优化
        function initMedia() {
            const bgMusic = document.getElementById('bgMusic');
            bgMusic.volume = 0.3; // 降低音量，减少干扰
            
            // 检测环境
            const isWeChatMobile = /MicroMessenger/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
        // 所有环境下都播放音乐，不禁用
        function tryPlayMusic() {
            bgMusic.muted = true;
            const playPromise = bgMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log('背景音乐播放成功');
                    setTimeout(() => {
                        bgMusic.muted = false;
                    }, 500);
                }).catch(e => {
                    console.log('音乐自动播放受限，等待用户交互');
                });
            }
        }
        
        tryPlayMusic();
        
        // 用户交互后播放音乐
        const playOnInteraction = function() {
            bgMusic.play().then(() => {
                bgMusic.muted = false;
            });
            document.removeEventListener('click', playOnInteraction);
            document.removeEventListener('touchstart', playOnInteraction);
        };
        
        document.addEventListener('click', playOnInteraction, { once: true });
        document.addEventListener('touchstart', playOnInteraction, { once: true });
            
            // 初始化视频播放
            initVideoPlayer();
        }

        // 视频预加载函数 - 微信环境优化
        function preloadVideos() {
            const video1 = document.getElementById('bgVideo1');
            const video2 = document.getElementById('bgVideo2');
            
            // 微信环境下只预加载一个视频
            const isWeChatMobile = /MicroMessenger/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);
            
            if (isWeChatMobile) {
                video2.style.display = 'none';
                video2.removeAttribute('src');
                console.log('微信环境：只预加载一个视频以减少资源占用');
            }
            
            // 视频加载事件监听
            video1.addEventListener('loadeddata', function() {
                console.log('视频1加载完成');
                this.classList.add('loaded');
            });
            
            video1.addEventListener('error', function() {
                console.error('视频1加载失败');
                document.querySelector('.video-background').classList.add('video-error');
            });
            
            video2.addEventListener('loadeddata', function() {
                console.log('视频2加载完成');
                this.classList.add('loaded');
            });
            
            video2.addEventListener('error', function() {
                console.error('视频2加载失败');
            });
            
            // 设置预加载属性
            video1.preload = 'auto';
            video2.preload = isWeChatMobile ? 'none' : 'auto';
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 微信环境下延迟加载，避免卡顿
            const isWeChatMobile = /MicroMessenger/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);
            
            if (isWeChatMobile) {
                setTimeout(() => {
                    preloadVideos();
                    initMedia();
                }, 500); // 延迟500ms加载，让页面先渲染
            } else {
                preloadVideos();
                initMedia();
            }
        });
    </script>
    <!--header-->
	
	<script>
		function updateRuntime() {
			try {
				// 使用本地时间创建日期对象
				const startDate = new Date(2025, 5, 30, 12, 10, 0); // 月份是0-11，所以6月是5
				const now = new Date();
				
				// 计算时间差
				const diff = now - startDate;
				const days = Math.floor(diff / (1000 * 60 * 60 * 24));
				const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
				const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
				const seconds = Math.floor((diff % (1000 * 60)) / 1000);

				// 确保DOM元素存在
				const daysEl = document.getElementById('runtime-days');
				const hoursEl = document.getElementById('runtime-hours');
				const minutesEl = document.getElementById('runtime-minutes');
				const secondsEl = document.getElementById('runtime-seconds');
				
				if (daysEl && hoursEl && minutesEl && secondsEl) {
					daysEl.textContent = days;
					hoursEl.textContent = hours;
					minutesEl.textContent = minutes;
					secondsEl.textContent = seconds;
					console.log('运行时间更新成功:', days, '天', hours, '小时', minutes, '分钟', seconds, '秒');
				} else {
					console.error('DOM元素未找到');
				}
			} catch (e) {
				console.error('更新运行时间出错:', e);
			}
		}

		// 确保DOM加载完成后执行
		document.addEventListener('DOMContentLoaded', function() {
			console.log('DOM已加载，初始化运行时间计时器');
			updateRuntime();
			setInterval(updateRuntime, 1000); // 每秒更新一次
		});
	</script>
	<!--//header-->
	<div class="login-link-container" style="position: absolute; top: 20px; right: 20px;">
		<button id="showLoginBtn" style="background: rgba(0,0,0,0.5); border: 1px solid #fff; color: #fff; font-size: 18px; cursor: pointer; padding: 5px 15px; border-radius: 5px;">进入</button>
	</div>
	<div class="main-content-agile" style="display: none;">
		<div class="sub-main-w3">
			<div style="position: relative;">
				<h2 id="loginTitle">你好呀</h2>
				<button type="button" id="backBtn" style="position: absolute; top: 0; right: 0; background: rgba(0,0,0,0.5); border: 1px solid #fff; width: 30px; height: 30px; border-radius: 50%; color: white; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">×</button>
			</div>
			<form action="#" method="post">
				<label>用户名</label>
				<div class="pom-agile">
					<span class="fa fa-user-o" aria-hidden="true"></span>
					<input placeholder="请输入用户名" name="Name" class="user" type="text" required="">
				</div>
				<label>密码</label>
				<div class="pom-agile">
					<span class="fa fa-key" aria-hidden="true"></span>
					<input placeholder="请输入密码" name="Password" class="pass" type="password" required=""
						id="passwordInput">
					<span class="fa fa-eye-slash" aria-hidden="true" id="togglePassword"
						style="cursor: pointer; margin-left: -25px;"></span>
				</div>
				<div class="sub-w3l">
					<div class="sub-agile">
						<input type="checkbox" id="brand1" value="">
						<label for="brand1">
							<span></span>保持登录状态</label>
					</div>
					<div class="clear"></div>
				</div>
				<div class="right-w3l">
					<div class="button-group">
						<input type="submit" value="登录" id="loginBtn" class="action-btn">
						<div class="loader" style="display:none;">
							<div class="loader-circle"></div>
							<div class="loader-circle"></div>
							<div class="loader-circle"></div>
						</div>
					</div>
					<div class="guest-btn-container">
						<a href="index.html" class="guest-btn" id="guestLink">游客访问</a>
					</div>
				</div>
				<script>
					document.getElementById('backBtn').addEventListener('click', function() {
						document.querySelector('.main-content-agile').style.display = 'none';
						document.getElementById('showLoginBtn').style.display = 'block';
					});
				</script>
				<script>
					const titleGreetings = [
						"你好呀",
						"Здравствуйте",
						"こんにちは",
						"안녕하세요",
						"Bonjour",
						"Guten Tag",
						"السلام عليكم",
						"Habari"
					];

					const loginTitle = document.getElementById('loginTitle');
					let titleIndex = 0;

					function changeTitle() {
						titleIndex = (titleIndex + 1) % titleGreetings.length;
						loginTitle.textContent = titleGreetings[titleIndex];
					}

					// 每2秒切换一次标题
					setInterval(changeTitle, 2000);

					const loginBtn = document.getElementById('loginBtn');
					loginBtn.value = "登录";

					document.querySelector('form').addEventListener('submit', function (e) {
						e.preventDefault();
						const submitBtn = this.querySelector('input[type="submit"]');
						const loader = this.querySelector('.loader');

						submitBtn.style.display = 'none';
						loader.style.display = 'flex';

						// 模拟登录过程
						const usernameInput = document.querySelector('input[name="Name"]');
						const passwordInput = document.getElementById('passwordInput');

						const username = usernameInput ? usernameInput.value : '';
						const password = passwordInput ? passwordInput.value : '';

						if (username.trim() === "Momo" && password.trim() === "5201314") {
							sessionStorage.setItem('isAuthenticated', 'true');
							submitBtn.style.display = 'block';
							loader.style.display = 'none';
							document.querySelector('.main-content-agile').style.display = 'none';
							document.getElementById('showLoginBtn').style.display = 'block';
							window.location.href = 'index.html';
						} else {
							submitBtn.style.display = 'block';
							loader.style.display = 'none';
							alert('用户名或密码错误！');
						}
					});

					// 游客访问跳转
					document.getElementById('guestLink').addEventListener('click', function(e) {
						e.preventDefault();
						console.log('正在以游客身份访问');
						window.location.href = './index.html?guest=true';
					});

					// 密码显示/隐藏切换
					const togglePassword = document.getElementById('togglePassword');
					const passwordInput = document.getElementById('passwordInput');

					togglePassword.addEventListener('click', function () {
						const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
						passwordInput.setAttribute('type', type);
						this.classList.toggle('fa-eye');
						this.classList.toggle('fa-eye-slash');
					});
				</script>
			</form>
		</div>
	</div>
	<!--//main-->
	<!--footer-->
	<div class="footer" style="position: fixed; bottom: 0; width: 100%; text-align: center; background: rgba(0,0,0,0.5); padding: 10px 0;">
		<p style="margin: 0;">&copy; 2025 Momo的小破站 版权所有 | <a target="_blank" href="https://github.com/Risker21"
				title="github个人页" style="color: #fff;">Momo同学</a>
		</p>
	</div>
	<div class="header-w3l" style="position: fixed; bottom: 50px; width: 100%;">
		<h1 id="runtime-display" style="font-size: 14px;">
			网站已成功运行: <span id="runtime-days">0</span>天 <span id="runtime-hours">0</span>小时 <span
				id="runtime-minutes">0</span>分钟 <span id="runtime-seconds">0</span>秒
		</h1>
	</div>
	<!--//footer-->
    <script>
        // 显示/隐藏登录表单
        document.getElementById('showLoginBtn').addEventListener('click', function() {
            this.style.display = 'none';
            document.querySelector('.main-content-agile').style.display = 'block';
        });

        // 极简视频播放控制 - 针对微信和移动端优化
        function initVideoPlayer() {
            const video1 = document.getElementById('bgVideo1');
            const video2 = document.getElementById('bgVideo2');
            
            // 检测是否为微信环境
            const isWeChatMobile = /MicroMessenger/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // 微信和移动端特殊处理：只使用一个视频，避免复杂切换
            if (isWeChatMobile || isMobile) {
                console.log('微信/移动端环境：使用简化视频播放方案');
                
                // 隐藏第二个视频，只使用第一个视频
                video2.style.display = 'none';
                video1.style.display = 'block';
                
                // 确保playsinline属性
                video1.setAttribute('playsinline', '');
                video1.setAttribute('webkit-playsinline', '');
                
                // 极简播放逻辑
                function tryPlayVideo(video) {
                    video.muted = true;
                    const playPromise = video.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log('视频播放成功');
                            // 延迟取消静音
                            setTimeout(() => {
                                video.muted = false;
                            }, 500);
                        }).catch(e => {
                            console.log('视频自动播放受限');
                        });
                    }
                }
                
                // 立即尝试播放
                tryPlayVideo(video1);
                
                // 添加用户交互后播放的监听
                const playOnInteraction = function() {
                    video1.play().then(() => {
                        video1.muted = false;
                    });
                    document.removeEventListener('click', playOnInteraction);
                    document.removeEventListener('touchstart', playOnInteraction);
                };
                
                document.addEventListener('click', playOnInteraction, { once: true });
                document.addEventListener('touchstart', playOnInteraction, { once: true });
                
                return;
            }

            // 桌面端：使用简单的视频循环
            video1.style.display = 'block';
            video2.style.display = 'none';
            
            // 视频结束自动循环
            video1.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            });
            
            // 确保视频播放
            video1.play().catch(e => {
                console.log('桌面端视频播放需要用户交互');
            });
        }

        // 性能优化：减少不必要的JavaScript操作
        function optimizePerformance() {
            // 微信和移动端环境下，减少动画和复杂效果
            const isWeChatMobile = /MicroMessenger/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isWeChatMobile || isMobile) {
                console.log('移动端性能优化：减少动画效果');
                
                // 减少标题切换频率
                const titleInterval = setInterval(function() {
                    const loginTitle = document.getElementById('loginTitle');
                    if (loginTitle) {
                        clearInterval(titleInterval);
                        const titleGreetings = ["你好呀"];
                        loginTitle.textContent = titleGreetings[0];
                    }
                }, 100);
                
                // 简化按钮动画
                const showLoginBtn = document.getElementById('showLoginBtn');
                if (showLoginBtn) {
                    showLoginBtn.style.animation = 'none';
                }
            }
        }

        // 页面加载完成后初始化媒体
        document.addEventListener('DOMContentLoaded', function() {
            // 预加载视频资源
            preloadVideos();
            // 性能优化
            optimizePerformance();
            initMedia();
        });
    </script>
<script>
// 清除表单函数
function clearForm() {
    document.querySelector('input[name="Name"]').value = '';
    document.getElementById('passwordInput').value = '';
    document.querySelector('.sub-agile input[type="checkbox"]').checked = false;
}

// 返回按钮点击事件 - 直接绑定到现有返回按钮处理函数
const originalBackBtnHandler = document.getElementById('backBtn').onclick;
document.getElementById('backBtn').onclick = function() {
    clearForm();
    originalBackBtnHandler.call(this);
};

// 登录成功后清除表单
document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();
    const submitBtn = this.querySelector('input[type="submit"]');
    const loader = this.querySelector('.loader');

    submitBtn.style.display = 'none';
    loader.style.display = 'flex';

    // 模拟登录过程
    const username = document.querySelector('input[name="Name"]').value;
    const password = document.getElementById('passwordInput').value;

    if (username.trim() === "Momo" && password.trim() === "5201314") {
        setTimeout(() => {
            clearForm();
            submitBtn.style.display = 'block';
            loader.style.display = 'none';
            document.querySelector('.main-content-agile').style.display = 'none';
            document.getElementById('showLoginBtn').style.display = 'block';
            window.location.href = 'index.html';
        }, 1000);
    } else {
        alert('用户名或密码错误！');
        submitBtn.style.display = 'block';
        loader.style.display = 'none';
    }
});
</script>
</body>
</html>
