<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
	<title>登录</title>
	<!-- Meta tag Keywords -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords"
		content="Simple Signin Form Responsive Widget,Login form widgets, Sign up Web forms , Login signup Responsive web form,Flat Pricing table,Flat Drop downs,Registration Forms,News letter Forms,Elements" />
	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- Meta tag Keywords -->
	<!-- css files -->
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
	<!-- Style-CSS -->
	<link rel="stylesheet" href="css/font-awesome.css">
	<!-- Font-Awesome-Icons-CSS -->
	<!-- //css files -->
	<!-- web-fonts -->
	<link href="https://fonts.googleapis.com/css?family=Play:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i"
		rel="stylesheet">
	<!-- //web-fonts -->
	<link rel="icon" href="./images/favicon.jpg" type="image/x-icon">
	
</head>

<body>
    <div class="video-background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: -1; margin: 0; padding: 0;">
        <video id="bgVideo1" autoplay muted loop style="min-width: 100%; min-height: 100%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); object-fit: cover;">
            <source src="audio/login1.mp4" type="video/mp4">
        </video>
        <video id="bgVideo2" autoplay muted loop style="display:none; min-width: 100%; min-height: 100%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); object-fit: cover;">
            <source src="audio/login2.mp4" type="video/mp4">
        </video>
    </div>
    <style>
        @media (max-aspect-ratio: 16/9) {
            .video-background video {
                width: auto;
                height: 100%;
            }
        }
        @media (min-aspect-ratio: 16/9) {
            .video-background video {
                width: 100%;
                height: auto;
            }
        }
    </style>
    <audio id="bgMusic" loop autoplay>
        <source src="audio/login.mp3" type="audio/mp3">
    </audio>
    <script>
        // 自动播放背景音乐
        function initMedia() {
            const bgMusic = document.getElementById('bgMusic');
            bgMusic.volume = 0.5;
            
            // 确保音乐自动播放
            function ensurePlayback() {
                if (bgMusic.paused) {
                    // 直接尝试播放（不静音）
                    const playPromise = bgMusic.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log('背景音乐直接播放成功');
                        }).catch(e => {
                            console.error('背景音乐直接播放失败:', e);
                            // 如果直接播放失败，尝试静音播放
                            bgMusic.muted = true;
                            bgMusic.play().then(() => {
                                console.log('背景音乐静音播放成功');
                                // 添加用户交互事件监听，准备取消静音
                                document.addEventListener('click', function unmuteOnInteraction() {
                                    bgMusic.muted = false;
                                    console.log('用户交互后取消静音');
                                    document.removeEventListener('click', unmuteOnInteraction);
                                }, { once: true });
                            }).catch(e => {
                                console.error('背景音乐静音播放也失败:', e);
                                // 如果静音播放也失败，添加交互后播放的监听
                                document.addEventListener('click', function playOnInteraction() {
                                    bgMusic.play().then(() => {
                                        bgMusic.muted = false;
                                    }).catch(e => console.error('交互后播放失败:', e));
                                    document.removeEventListener('click', playOnInteraction);
                                }, { once: true });
                            });
                        });
                    }
                }
            }
            
            // 立即尝试播放
            ensurePlayback();
            
            // 添加周期性检查，确保音乐在播放
            setInterval(() => {
                if (bgMusic.paused) {
                    console.log('检测到音乐暂停，尝试重新播放');
                    ensurePlayback();
                }
            }, 3000);
            
            // 页面可见性变化时处理
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    ensurePlayback();
                }
            });
            
            // 初始化视频播放
            initVideoPlayer();
        }

        // 页面加载完成后初始化媒体
        document.addEventListener('DOMContentLoaded', function() {
            initMedia();
        });
    </script>
    <!--header-->
	
	<script>
		function updateRuntime() {
			try {
				// 使用本地时间创建日期对象
				const startDate = new Date(2025, 5, 30, 12, 10, 0); // 月份是0-11，所以6月是5
				const now = new Date();
				
				// 计算时间差
				const diff = now - startDate;
				const days = Math.floor(diff / (1000 * 60 * 60 * 24));
				const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
				const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
				const seconds = Math.floor((diff % (1000 * 60)) / 1000);

				// 确保DOM元素存在
				const daysEl = document.getElementById('runtime-days');
				const hoursEl = document.getElementById('runtime-hours');
				const minutesEl = document.getElementById('runtime-minutes');
				const secondsEl = document.getElementById('runtime-seconds');
				
				if (daysEl && hoursEl && minutesEl && secondsEl) {
					daysEl.textContent = days;
					hoursEl.textContent = hours;
					minutesEl.textContent = minutes;
					secondsEl.textContent = seconds;
					console.log('运行时间更新成功:', days, '天', hours, '小时', minutes, '分钟', seconds, '秒');
				} else {
					console.error('DOM元素未找到');
				}
			} catch (e) {
				console.error('更新运行时间出错:', e);
			}
		}

		// 确保DOM加载完成后执行
		document.addEventListener('DOMContentLoaded', function() {
			console.log('DOM已加载，初始化运行时间计时器');
			updateRuntime();
			setInterval(updateRuntime, 1000); // 每秒更新一次
		});
	</script>
	<!--//header-->
	<div class="login-link-container" style="position: absolute; top: 20px; right: 20px;">
		<button id="showLoginBtn" style="background: rgba(0,0,0,0.5); border: 1px solid #fff; color: #fff; font-size: 18px; cursor: pointer; padding: 5px 15px; border-radius: 5px;">进入</button>
	</div>
	<div class="main-content-agile" style="display: none;">
		<div class="sub-main-w3">
			<div style="position: relative;">
				<h2 id="loginTitle">你好呀</h2>
				<button type="button" id="backBtn" style="position: absolute; top: 0; right: 0; background: rgba(0,0,0,0.5); border: 1px solid #fff; width: 30px; height: 30px; border-radius: 50%; color: white; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">×</button>
			</div>
			<form action="#" method="post">
				<label>用户名</label>
				<div class="pom-agile">
					<span class="fa fa-user-o" aria-hidden="true"></span>
					<input placeholder="请输入用户名" name="Name" class="user" type="text" required="">
				</div>
				<label>密码</label>
				<div class="pom-agile">
					<span class="fa fa-key" aria-hidden="true"></span>
					<input placeholder="请输入密码" name="Password" class="pass" type="password" required=""
						id="passwordInput">
					<span class="fa fa-eye-slash" aria-hidden="true" id="togglePassword"
						style="cursor: pointer; margin-left: -25px;"></span>
				</div>
				<div class="sub-w3l">
					<div class="sub-agile">
						<input type="checkbox" id="brand1" value="">
						<label for="brand1">
							<span></span>保持登录状态</label>
					</div>
					<div class="clear"></div>
				</div>
				<div class="right-w3l">
					<div class="button-group">
						<input type="submit" value="登录" id="loginBtn" class="action-btn">
						<div class="loader" style="display:none;">
							<div class="loader-circle"></div>
							<div class="loader-circle"></div>
							<div class="loader-circle"></div>
						</div>
					</div>
					<div class="guest-btn-container">
						<a href="index.html" class="guest-btn" id="guestLink">游客访问</a>
					</div>
				</div>
				<script>
					document.getElementById('backBtn').addEventListener('click', function() {
						document.querySelector('.main-content-agile').style.display = 'none';
						document.getElementById('showLoginBtn').style.display = 'block';
					});
				</script>
				<script>
					const titleGreetings = [
						"你好呀",
						"Здравствуйте",
						"こんにちは",
						"안녕하세요",
						"Bonjour",
						"Guten Tag",
						"السلام عليكم",
						"Habari"
					];

					const loginTitle = document.getElementById('loginTitle');
					let titleIndex = 0;

					function changeTitle() {
						titleIndex = (titleIndex + 1) % titleGreetings.length;
						loginTitle.textContent = titleGreetings[titleIndex];
					}

					// 每2秒切换一次标题
					setInterval(changeTitle, 2000);

					const loginBtn = document.getElementById('loginBtn');
					loginBtn.value = "登录";

					document.querySelector('form').addEventListener('submit', function (e) {
						e.preventDefault();
						const submitBtn = this.querySelector('input[type="submit"]');
						const loader = this.querySelector('.loader');

						submitBtn.style.display = 'none';
						loader.style.display = 'flex';

						// 模拟登录过程
						const usernameInput = document.querySelector('input[name="Name"]');
						const passwordInput = document.getElementById('passwordInput');

						const username = usernameInput ? usernameInput.value : '';
						const password = passwordInput ? passwordInput.value : '';

						if (username.trim() === "Momo" && password.trim() === "5201314") {
							sessionStorage.setItem('isAuthenticated', 'true');
							submitBtn.style.display = 'block';
							loader.style.display = 'none';
							document.querySelector('.main-content-agile').style.display = 'none';
							document.getElementById('showLoginBtn').style.display = 'block';
							window.location.href = 'index.html';
						} else {
							submitBtn.style.display = 'block';
							loader.style.display = 'none';
							alert('用户名或密码错误！');
						}
					});

					// 游客访问跳转
					document.getElementById('guestLink').addEventListener('click', function(e) {
						e.preventDefault();
						console.log('正在以游客身份访问');
						window.location.href = './index.html?guest=true';
					});

					// 密码显示/隐藏切换
					const togglePassword = document.getElementById('togglePassword');
					const passwordInput = document.getElementById('passwordInput');

					togglePassword.addEventListener('click', function () {
						const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
						passwordInput.setAttribute('type', type);
						this.classList.toggle('fa-eye');
						this.classList.toggle('fa-eye-slash');
					});
				</script>
			</form>
		</div>
	</div>
	<!--//main-->
	<!--footer-->
	<div class="footer" style="position: fixed; bottom: 0; width: 100%; text-align: center; background: rgba(0,0,0,0.5); padding: 10px 0;">
		<p style="margin: 0;">&copy; 2025 Momo的小破站 版权所有 | <a target="_blank" href="https://github.com/Risker21"
				title="github个人页" style="color: #fff;">Momo同学</a>
		</p>
	</div>
	<div class="header-w3l" style="position: fixed; bottom: 50px; width: 100%;">
		<h1 id="runtime-display" style="font-size: 14px;">
			网站已成功运行: <span id="runtime-days">0</span>天 <span id="runtime-hours">0</span>小时 <span
				id="runtime-minutes">0</span>分钟 <span id="runtime-seconds">0</span>秒
		</h1>
	</div>
	<!--//footer-->
    <script>
        // 显示/隐藏登录表单
        document.getElementById('showLoginBtn').addEventListener('click', function() {
            this.style.display = 'none';
            document.querySelector('.main-content-agile').style.display = 'block';
        });

        // 视频顺序循环播放控制
        function initVideoPlayer() {
            const video1 = document.getElementById('bgVideo1');
            const video2 = document.getElementById('bgVideo2');
            
            // 检测是否为移动设备或微信
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isWeChatMobile = /MicroMessenger/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);
            
            if (isMobile || isWeChatMobile) {
                // 移动设备或微信移动端，使用背景图片
                const videoContainer = document.querySelector('.video-background');
                videoContainer.innerHTML = '';
                const bgImage = document.createElement('div');
                bgImage.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url(../images/图56.jpg) center/cover no-repeat;';
                videoContainer.appendChild(bgImage);
                return;
            }

            // 初始化视频状态
            video1.style.display = 'block';
            video2.style.display = 'none';

            // 播放当前视频并设置下一个视频
            function playCurrentVideo(currentVideo, nextVideo) {
                console.log(`准备播放 ${currentVideo.id}`);
                currentVideo.currentTime = 0;
                
                // 先移除所有事件监听器
                currentVideo.removeEventListener('ended', currentVideo._onEndHandler);
                currentVideo.removeEventListener('timeupdate', currentVideo._onTimeUpdate);
                
                // 定义ended事件处理函数
                currentVideo._onEndHandler = function onEnd() {
                    console.log(`${currentVideo.id} 播放结束(ended事件触发)`);
                    switchVideos(currentVideo, nextVideo);
                };
                
                // 定义timeupdate事件处理函数作为备用
                currentVideo._onTimeUpdate = function onTimeUpdate() {
                    // 检查是否接近视频结束(最后0.5秒)
                    if (currentVideo.currentTime > currentVideo.duration - 0.5 && currentVideo.duration > 0) {
                        console.log(`${currentVideo.id} 接近结束，准备切换`);
                        switchVideos(currentVideo, nextVideo);
                    }
                };
                
                // 添加事件监听
                currentVideo.addEventListener('ended', currentVideo._onEndHandler);
                currentVideo.addEventListener('timeupdate', currentVideo._onTimeUpdate);
                
                // 尝试播放
                const playPromise = currentVideo.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log(`${currentVideo.id} 开始播放`);
                        // 检查视频元数据
                        if (currentVideo.readyState >= 1) {
                            console.log(`${currentVideo.id} 时长: ${currentVideo.duration}s`);
                        } else {
                            currentVideo.addEventListener('loadedmetadata', () => {
                                console.log(`${currentVideo.id} 加载元数据完成，时长: ${currentVideo.duration}s`);
                            }, {once: true});
                        }
                    }).catch(e => {
                        console.error(`${currentVideo.id} 播放失败:`, e);
                        switchVideos(currentVideo, nextVideo);
                    });
                }
            }
            
            // 切换视频函数
            function switchVideos(currentVideo, nextVideo) {
                console.log(`正在从 ${currentVideo.id} 切换到 ${nextVideo.id}`);
                currentVideo.style.display = 'none';
                nextVideo.style.display = 'block';
                playCurrentVideo(nextVideo, currentVideo);
            }

            // 开始播放第一个视频
            playCurrentVideo(video1, video2);
        }
    </script>
<script>
// 清除表单函数
function clearForm() {
    document.querySelector('input[name="Name"]').value = '';
    document.getElementById('passwordInput').value = '';
    document.querySelector('.sub-agile input[type="checkbox"]').checked = false;
}

// 返回按钮点击事件 - 直接绑定到现有返回按钮处理函数
const originalBackBtnHandler = document.getElementById('backBtn').onclick;
document.getElementById('backBtn').onclick = function() {
    clearForm();
    originalBackBtnHandler.call(this);
};

// 登录成功后清除表单
document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();
    const submitBtn = this.querySelector('input[type="submit"]');
    const loader = this.querySelector('.loader');

    submitBtn.style.display = 'none';
    loader.style.display = 'flex';

    // 模拟登录过程
    const username = document.querySelector('input[name="Name"]').value;
    const password = document.getElementById('passwordInput').value;

    if (username.trim() === "Momo" && password.trim() === "5201314") {
        setTimeout(() => {
            clearForm();
            submitBtn.style.display = 'block';
            loader.style.display = 'none';
            document.querySelector('.main-content-agile').style.display = 'none';
            document.getElementById('showLoginBtn').style.display = 'block';
            window.location.href = 'index.html';
        }, 1000);
    } else {
        alert('用户名或密码错误！');
        submitBtn.style.display = 'block';
        loader.style.display = 'none';
    }
});
</script>
</body>
</html>
